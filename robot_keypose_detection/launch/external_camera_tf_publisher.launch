<launch>

  <arg name="input_image" />
  <arg name="input_camera_info" />
  <arg name="gpu" default="0" />

  <node name="dynamic_tf_publisher"
        pkg="dynamic_tf_publisher" type="tf_publish.py"
        output="screen" clear_params="true" >
    <remap from="/set_dynamic_tf" to="set_dynamic_tf"/>
    <remap from="/assoc_tf"   to="assoc_tf"  />
    <remap from="/dissoc_tf"  to="dissoc_tf" />
    <remap from="/publish_tf" to="publish_tf"/>
    <remap from="/delete_tf"  to="delete_tf" />
  </node>

  <node name="robot_keypose_detector_node"
        pkg="robot_keypose_detection" type="robot_keypose_detection_node.py"
        output="screen" clear_params="true" >
    <remap from="~input/image" to="$(arg input_image)" />
    <remap from="~input/camera_info" to="$(arg input_camera_info)" />
    <rosparam subst_value="true" >
      model: $(find robot_keypose_detection)/trained_data/pr2_keypose_model.chainermodel
      gpu: $(arg gpu)
    </rosparam>
  </node>

  <group ns="robot_keypose_detector_node" >
    <node name="republish_image"
          pkg="image_transport" type="republish"
	        args="raw compressed" >
      <remap from="in" to="output/image" />
      <remap from="out" to="output/image" />
    </node>
  </group>

</launch>
