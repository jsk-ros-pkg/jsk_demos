<launch>
    <arg name="initial_node_id" default="eng2_73B2" />

    <arg name="use_person_detection" default="true"/>
    <arg name="use_obstacle_detection" default="true"/>

    <rosparam subst_value="true">
        /narrow_behavior/use_person_detection: $(arg use_person_detection)
        /narrow_behavior/use_obstacle_detection: $(arg use_obstacle_detection)
    </rosparam>

    <!-- -->
    <node
        pkg="spot_behavior_manager_demo"
        type="demo.py"
        name="spot_person_lead_demo"
        output="screen"
        >

        <rosparam
            ns="map"
            file="$(find spot_person_lead_demo)/config/edges.yaml"
            subst_value="true"
            />
        <rosparam
            ns="map"
            file="$(find spot_behavior_manager_demo)/config/nodes.yaml"
            subst_value="true"
            />

        <rosparam subst_value="true">
            initial_node_id: '$(arg initial_node_id)'
            action_names_synchronizer:
                - '/spot_behavior_manager_demo/execute_behaviors'
        </rosparam>
    </node>

    <node
        pkg="spot_behavior_manager_demo"
        type="demo.py"
        name="spot_behavior_manager_demo"
        output="screen"
        >

        <rosparam
            ns="map"
            file="$(find spot_behavior_manager_demo)/config/edges.yaml"
            subst_value="true"
            />
        <rosparam
            ns="map"
            file="$(find spot_behavior_manager_demo)/config/nodes.yaml"
            subst_value="true"
            />

        <rosparam subst_value="true">
            initial_node_id: '$(arg initial_node_id)'
            action_names_synchronizer:
                - '/spot_person_lead_demo/execute_behaviors'
        </rosparam>
    </node>

    <!--  -->
    <node
        pkg="spot_person_lead_demo"
        type="person_lead_demo.py"
        name="person_lead_demo"
        output="screen"
        >
        <rosparam
            file="$(find spot_behavior_manager_demo)/config/nodes.yaml"
            subst_value="true"
            />
    </node>

    <!-- ros speech recognition -->
    <include file="$(find ros_speech_recognition)/launch/speech_recognition.launch">
        <arg name="launch_sound_play" value="false" />
        <arg name="launch_audio_capture" value="false" />
        <arg name="audio_topic" value="/audio" />
        <arg name="language" default="ja-JP" />
    </include>
</launch>
