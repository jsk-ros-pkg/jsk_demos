<launch>

  <arg name="save_dir"
       value="~/data/datasets/eng2_2f_forum_door/raw_data/20191024/before_split"/>

  <!-- ******************************************************************** -->
  <!-- Data collection                                                      -->
  <!-- ******************************************************************** -->

  <node name="data_collection_server"
        pkg="jsk_data" type="data_collection_server.py"
        clear_params="true" output="screen">
    <rosparam subst_value="true">
      save_dir: $(arg save_dir)
      topics:
        - name: /kinect_head/rgb/image_rect_color
          msg_class: sensor_msgs/Image
          fname: kinect_rgb.jpg
          savetype: ColorImage
        - name: /narrow_stereo/left/image_rect_color
          msg_class: sensor_msgs/Image
          fname: narrow_left.jpg
          savetype: ColorImage
        - name: /narrow_stereo/right/image_rect_color
          msg_class: sensor_msgs/Image
          fname: narrow_right.jpg
          savetype: ColorImage
        - name: /wide_stereo/left/image_rect_color
          msg_class: sensor_msgs/Image
          fname: wide_left.jpg
          savetype: ColorImage
        - name: /wide_stereo/right/image_rect_color
          msg_class: sensor_msgs/Image
          fname: wide_right.jpg
          savetype: ColorImage
      approximate_sync: true
      slop: 1.0
    </rosparam>
  </node>

  <node name="save_image_by_btn"
        pkg="elevator_move_base_pr2" type="save_image_by_btn.py"
        output="screen"/>

  <node name="rqt_yn_btn"
        pkg="jsk_rqt_plugins" type="rqt_yn_btn"/>

  <!-- ******************************************************************** -->
  <!-- Visualization                                                        -->
  <!-- ******************************************************************** -->

  <node name="tile_image"
        pkg="jsk_perception" type="tile_image.py">
    <rosparam subst_value="true">
      input_topics:
        - /kinect_head/rgb/image_rect_color
        - /narrow_stereo/left/image_rect_color
        - /narrow_stereo/right/image_rect_color
        - /wide_stereo/left/image_rect_color
        - /wide_stereo/right/image_rect_color
      no_sync: true
      draw_topic_name: true
      font_scale: 0.8
    </rosparam>
  </node>

  <node name="image_view"
        pkg="image_view" type="image_view">
    <remap from="image" to="tile_image/output"/>
  </node>

</launch>
